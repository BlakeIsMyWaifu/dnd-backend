import { expect, test } from '@jest/globals'

import api from '../src/api.js'

interface Character {
	name: string;
	id: number;
	data: object;
}

const characters: Character[] = [
	{
		name: 'Lydia',
		id: 39132887,
		data: { 'status': true, 'armourclass': { 'modifier': [{ 'value': '2', 'type': 'Shield', 'source': 'Shield' }], 'total': 18, 'base': { 'value': '16', 'source': 'Chain Mail' } }, 'character': { 'name': 'Lydia', 'gender': 'Female', 'race': 'Dragonborn', 'classes': 'Cleric 9', 'level': 9 }, 'conditions': [], 'defences': [{ 'type': 'Resistance', 'source': 'Dragonborn', 'defence': 'Cold' }, { 'type': 'Resistance', 'source': 'Ring of Fire Resistance', 'defence': 'Fire' }], 'health': { 'current': 75, 'max': 75, 'temp': 14 }, 'misc': { 'proficiency': 4, 'speed': 30, 'inspiration': false, 'initiative': 1 }, 'proficiencies': { 'armour': [{ 'source': 'Cleric', 'item': 'Heavy Armor' }, { 'source': 'Cleric', 'item': 'Light Armor' }, { 'source': 'Cleric', 'item': 'Medium Armor' }, { 'source': 'Cleric', 'item': 'Shields' }], 'weapons': [{ 'source': 'Cleric', 'item': 'Simple Weapons' }], 'tools': [], 'languages': [{ 'source': 'Dragonborn', 'item': 'Common' }, { 'source': 'Dragonborn', 'item': 'Draconic' }, { 'source': 'Acolyte', 'item': 'Dwarvish' }, { 'source': 'Acolyte', 'item': 'Elvish' }] }, 'savingThrows': { 'modifier': [], 'strength': { 'modifier': 4, 'proficiency': false }, 'dexterity': { 'modifier': 1, 'proficiency': false }, 'consitution': { 'modifier': 3, 'proficiency': false }, 'intelligence': { 'modifier': 0, 'proficiency': false }, 'wisdom': { 'modifier': 8, 'proficiency': true }, 'charisma': { 'modifier': 3, 'proficiency': true } }, 'senses': { 'perception': 14, 'investigation': 10, 'insight': 18, 'addition': [] }, 'skills': [{ 'proficiency': 'Not', 'stat': 'dexterity', 'skill': 'Acrobatics', 'vantage': null, 'modifier': 1 }, { 'proficiency': 'Proficient', 'stat': 'wisdom', 'skill': 'Animal Handling', 'vantage': null, 'modifier': 8 }, { 'proficiency': 'Not', 'stat': 'intelligence', 'skill': 'Arcana', 'vantage': null, 'modifier': 0 }, { 'proficiency': 'Not', 'stat': 'strength', 'skill': 'Athletics', 'vantage': null, 'modifier': 4 }, { 'proficiency': 'Not', 'stat': 'charisma', 'skill': 'Deception', 'vantage': null, 'modifier': -1 }, { 'proficiency': 'Not', 'stat': 'intelligence', 'skill': 'History', 'vantage': null, 'modifier': 0 }, { 'proficiency': 'Proficient', 'stat': 'wisdom', 'skill': 'Insight', 'vantage': null, 'modifier': 8 }, { 'proficiency': 'Not', 'stat': 'charisma', 'skill': 'Intimidation', 'vantage': null, 'modifier': -1 }, { 'proficiency': 'Not', 'stat': 'intelligence', 'skill': 'Investigation', 'vantage': null, 'modifier': 0 }, { 'proficiency': 'Proficient', 'stat': 'wisdom', 'skill': 'Medicine', 'vantage': null, 'modifier': 8 }, { 'proficiency': 'Not', 'stat': 'intelligence', 'skill': 'Nature', 'vantage': null, 'modifier': 0 }, { 'proficiency': 'Not', 'stat': 'wisdom', 'skill': 'Perception', 'vantage': null, 'modifier': 4 }, { 'proficiency': 'Not', 'stat': 'charisma', 'skill': 'Performance', 'vantage': null, 'modifier': -1 }, { 'proficiency': 'Not', 'stat': 'charisma', 'skill': 'Persuasion', 'vantage': null, 'modifier': -1 }, { 'proficiency': 'Proficient', 'stat': 'intelligence', 'skill': 'Religion', 'vantage': null, 'modifier': 4 }, { 'proficiency': 'Not', 'stat': 'dexterity', 'skill': 'Sleight of Hand', 'vantage': null, 'modifier': 1 }, { 'proficiency': 'Not', 'stat': 'dexterity', 'skill': 'Stealth', 'vantage': 'Disadvantage', 'modifier': 1 }, { 'proficiency': 'Not', 'stat': 'wisdom', 'skill': 'Survival', 'vantage': null, 'modifier': 4 }], 'stats': { 'strength': { 'total': 18, 'modifier': 4, 'base': 16, 'racial': 2, 'ability': 0, 'misc': 0, 'stacking': 0, 'set': 0 }, 'dexterity': { 'total': 13, 'modifier': 1, 'base': 13, 'racial': 0, 'ability': 0, 'misc': 0, 'stacking': 0, 'set': 0 }, 'consitution': { 'total': 17, 'modifier': 3, 'base': 17, 'racial': 0, 'ability': 0, 'misc': 0, 'stacking': 0, 'set': 0 }, 'intelligence': { 'total': 10, 'modifier': 0, 'base': 10, 'racial': 0, 'ability': 0, 'misc': 0, 'stacking': 0, 'set': 0 }, 'wisdom': { 'total': 19, 'modifier': 4, 'base': 17, 'racial': 0, 'ability': 2, 'misc': 0, 'stacking': 0, 'set': 0 }, 'charisma': { 'total': 8, 'modifier': -1, 'base': 7, 'racial': 1, 'ability': 0, 'misc': 0, 'stacking': 0, 'set': 0 } } }
	},
	{
		name: 'Chia Liadon',
		id: 25752147,
		data: { "status": true, "armourclass": { "modifier": [{ "value": "1", "type": "Dexterity Bonus" }, { "value": "2", "type": "Shield", "source": "Shield" }], "total": 16, "base": { "value": "13", "source": "Studded Leather, +1" } }, "character": { "name": "Chia Liadon", "gender": "Female", "race": "Half-Elf", "classes": "Druid 15", "level": 15 }, "conditions": [], "defences": [{ "type": "Resistance", "source": "Brooch of Shielding", "defence": "Force" }], "health": { "current": 123, "max": 123, "temp": 0 }, "misc": { "proficiency": 5, "speed": 40, "inspiration": false, "initiative": 1 }, "proficiencies": { "armour": [{ "source": "Druid", "item": "Light Armor" }, { "source": "Druid", "item": "Medium Armor" }, { "source": "Druid", "item": "Shields" }], "weapons": [{ "source": "Druid", "item": "Club" }, { "source": "Druid", "item": "Dagger" }, { "source": "Druid", "item": "Dart" }, { "source": "Druid", "item": "Javelin" }, { "source": "Druid", "item": "Mace" }, { "source": "Druid", "item": "Quarterstaff" }, { "source": "Druid", "item": "Scimitar" }, { "source": "Druid", "item": "Sickle" }, { "source": "Druid", "item": "Sling" }, { "source": "Druid", "item": "Spear" }], "tools": [{ "source": "Druid", "item": "Herbalism Kit" }], "languages": [{ "source": "Half-Elf", "item": "Common" }, { "source": "Sage", "item": "Draconic" }, { "source": "Druid", "item": "Druidic" }, { "source": "Half-Elf", "item": "Dwarvish" }, { "source": "Half-Elf", "item": "Elvish" }, { "source": "Sage", "item": "Halfling" }] }, "savingThrows": { "modifier": [{ "type": "Advantage", "subtype": "Effect", "modifier": "Advantage against being charmed, and magic canâ€™t put you to sleep", "source": null }], "strength": { "modifier": 1, "proficiency": false }, "dexterity": { "modifier": 1, "proficiency": false }, "consitution": { "modifier": 3, "proficiency": false }, "intelligence": { "modifier": 7, "proficiency": true }, "wisdom": { "modifier": 10, "proficiency": true }, "charisma": { "modifier": 3, "proficiency": false } }, "senses": { "perception": 20, "investigation": 12, "insight": 20, "addition": [{ "sense": "Darkvision", "value": "60" }] }, "skills": [{ "proficiency": "Not", "stat": "dexterity", "skill": "Acrobatics", "vantage": null, "modifier": 1 }, { "proficiency": "Proficient", "stat": "wisdom", "skill": "Animal Handling", "vantage": null, "modifier": 10 }, { "proficiency": "Proficient", "stat": "intelligence", "skill": "Arcana", "vantage": null, "modifier": 7 }, { "proficiency": "Proficient", "stat": "strength", "skill": "Athletics", "vantage": null, "modifier": 6 }, { "proficiency": "Not", "stat": "charisma", "skill": "Deception", "vantage": null, "modifier": 3 }, { "proficiency": "Proficient", "stat": "intelligence", "skill": "History", "vantage": null, "modifier": 7 }, { "proficiency": "Proficient", "stat": "wisdom", "skill": "Insight", "vantage": null, "modifier": 10 }, { "proficiency": "Not", "stat": "charisma", "skill": "Intimidation", "vantage": null, "modifier": 3 }, { "proficiency": "Not", "stat": "intelligence", "skill": "Investigation", "vantage": null, "modifier": 2 }, { "proficiency": "Proficient", "stat": "wisdom", "skill": "Medicine", "vantage": null, "modifier": 10 }, { "proficiency": "Proficient", "stat": "intelligence", "skill": "Nature", "vantage": null, "modifier": 7 }, { "proficiency": "Proficient", "stat": "wisdom", "skill": "Perception", "vantage": null, "modifier": 10 }, { "proficiency": "Not", "stat": "charisma", "skill": "Performance", "vantage": null, "modifier": 3 }, { "proficiency": "Not", "stat": "charisma", "skill": "Persuasion", "vantage": null, "modifier": 3 }, { "proficiency": "Not", "stat": "intelligence", "skill": "Religion", "vantage": null, "modifier": 2 }, { "proficiency": "Not", "stat": "dexterity", "skill": "Sleight of Hand", "vantage": null, "modifier": 1 }, { "proficiency": "Proficient", "stat": "dexterity", "skill": "Stealth", "vantage": null, "modifier": 6 }, { "proficiency": "Not", "stat": "wisdom", "skill": "Survival", "vantage": null, "modifier": 5 }], "stats": { "strength": { "total": 12, "modifier": 1, "base": 12, "racial": 0, "ability": 0, "misc": 0, "stacking": 0, "set": 0 }, "dexterity": { "total": 13, "modifier": 1, "base": 13, "racial": 0, "ability": 0, "misc": 0, "stacking": 0, "set": 0 }, "consitution": { "total": 17, "modifier": 3, "base": 16, "racial": 1, "ability": 0, "misc": 0, "stacking": 0, "set": 0 }, "intelligence": { "total": 15, "modifier": 2, "base": 15, "racial": 0, "ability": 0, "misc": 0, "stacking": 0, "set": 0 }, "wisdom": { "total": 20, "modifier": 5, "base": 17, "racial": 1, "ability": 2, "misc": 0, "stacking": 0, "set": 0 }, "charisma": { "total": 17, "modifier": 3, "base": 15, "racial": 2, "ability": 0, "misc": 0, "stacking": 0, "set": 0 } } }
	}
]

test('api call', async () => {
	for await (const character of characters) {
		const data = await api(character.id)
		expect(data).toEqual(character.data)
	}
})